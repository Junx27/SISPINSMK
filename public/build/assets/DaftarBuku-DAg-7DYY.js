import{r as t,M as P,j as e,b as I,Y as J,a as Q}from"./app-CycvKacP.js";import{B as W}from"./Buku-DYLPF_Th.js";import{B as K}from"./Button-DqIqwc5t.js";import{u as O}from"./Url-Bx3CnFKe.js";import{E as X}from"./EditUser-D2Ci1d1G.js";import{D as i}from"./Dropdown-BzNwB-Q2.js";import"./index-I_Mwuxvc.js";import"./index-BI6bIyZt.js";import"./PopOver-C0JO4fVs.js";import"./transition-Zdt_VaLc.js";function Z({profile:r,logo:T,handleBookmark:N,handleSettting:m,auth:k,data:C}){const{value:$,setValue:u}=t.useContext(P),[p,g]=t.useState(!1),[c,o]=t.useState(!1),[d,j]=t.useState(!1),[h,b]=t.useState(!1),[n,x]=t.useState(""),[f,v]=t.useState(!1),S=[...new Set(C.filter(l=>l.caption.toLowerCase().includes(n.toLowerCase())).map(l=>l.caption))],w=()=>{u(n)};return e.jsxs("div",{children:[f?e.jsx("div",{onClick:()=>v(!1),children:n.length>0&&e.jsx("div",{className:"absolute text-sm bg-white rounded-lg shadow-lg w-[600px] z-50 top-20 left-5 md:left-64 overflow-hidden",children:S.slice(0,12).map(l=>e.jsx("div",{className:"p-2 px-5 cursor-pointer hover:bg-blue-50",onClick:()=>x(l),children:e.jsx("p",{children:l})},l.id))})}):e.jsx("div",{}),e.jsx("div",{className:"absolute z-40 py-2 w-full",children:e.jsxs("div",{className:"flex px-5 py-2 md:py-0 md:px-10 justify-between items-center",children:[e.jsxs("div",{className:"hidden md:flex items-center",children:[e.jsx("img",{src:"logo.png",alt:"",className:"w-[40px] h-[40px] md:w-[50px] md:h-[50px]"}),e.jsx("h1",{className:"hidden md:block font-bold text-white text-sm md:text-xl uppercase ml-2",children:"sispinsmk"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative",onClick:()=>v(!0),children:[e.jsx("input",{type:"text",className:" w-[180px] md:w-[600px] text-xs rounded-lg outline-0 border-0 truncate",placeholder:"cari buku...",value:n,onChange:l=>x(l.target.value)}),n&&e.jsx("div",{className:"absolute top-2 right-2 z-50",onClick:()=>x(""),children:e.jsx("img",{src:"/close.png",alt:"",className:"w-3 h-3 cursor-pointer"})})]}),e.jsx("button",{className:"text-white w-12 md:w-20 text-xs py-2 rounded-lg text-center bg-blue-500",onClick:w,children:"cari"})]}),e.jsxs("div",{className:"hidden md:flex flex-row gap-10 items-center",children:[e.jsx("a",{href:"https://wa.me/62813269032897?text=hallo...",target:"blank",children:e.jsxs("div",{className:"relative",onMouseOver:()=>o(!c),onMouseLeave:()=>o(!c),children:[e.jsx("img",{src:"/cs.png",alt:"",className:"w-10 h-10"}),c&&e.jsxs("p",{className:"text-center text-[10px] w-32 absolute bg-white p-2 rounded-lg top-12 right-0",children:["Customer service",e.jsx("span",{className:"absolute -mt-3 rotate-45 w-3 h-3 bg-white right-5"})]})]})}),e.jsxs("div",{className:"relative",onMouseOver:()=>j(!d),onMouseLeave:()=>j(!d),onClick:N,children:[e.jsx("img",{src:"/bookmark.png",alt:"",className:"w-8 h-8"}),d&&e.jsxs("p",{className:"text-center text-[10px] w-32 absolute bg-white p-2 rounded-lg top-12 right-0",children:["Bookmark",e.jsx("span",{className:"absolute -mt-3 rotate-45 w-3 h-3 bg-white right-5"})]})]}),e.jsxs("div",{className:"relative",onMouseOver:()=>b(!h),onMouseLeave:()=>b(!h),onClick:m,children:[e.jsx("img",{src:"/setting.png",alt:"",className:"w-8 h-8"}),h&&e.jsxs("p",{className:"text-center text-[10px] w-32 absolute bg-white p-2 rounded-lg top-12 right-0",children:["Pengaturan",e.jsx("span",{className:"absolute -mt-3 rotate-45 w-3 h-3 bg-white right-5"})]})]})]}),e.jsxs("div",{onClick:()=>g(!p),className:"hidden md:block relative cursor-pointer",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("p",{className:"text-white text-sm font-bold w-12 truncate capitalize",children:k}),e.jsx("img",{src:r,alt:"",className:"w-10 h-10 rounded-full object-cover"})]}),p&&e.jsxs(I,{href:"/logout",method:"post",className:"bg-white w-20 rounded-lg text-xs p-2 text-center absolute right-5 top-12 shadow-md",children:["Logout",e.jsx("span",{className:"absolute -mt-3 rotate-45 w-3 h-3 bg-white"})]})]}),e.jsx("div",{onClick:N,className:"block md:hidden",children:e.jsx("img",{src:"/bookmark.png",alt:"",className:"w-8 h-8"})}),e.jsx("div",{onClick:m,className:"block md:hidden",children:e.jsx("img",{src:r,alt:"",className:"w-10 h-10 rounded-full object-cover"})})]})})]})}function xe({auth:r,bukus:T,pinjamans:N}){const m=T.filter(s=>s.stok!==0),k=r.user.role.toLowerCase();t.useEffect(()=>{k==="admin"&&(window.location.href="/admin/dashboard")});const{value:C,setValue:$}=t.useContext(P),[u,p]=t.useState(!1),[g,c]=t.useState(!1),[o,d]=t.useState(!1),[j,h]=t.useState(null),[b,n]=t.useState(null),[x,f]=t.useState(null),[v,S]=t.useState(!1),[w,l]=t.useState(!1),[ee,F]=t.useState([]),[se,V]=t.useState(),U=()=>{S(!v),l(!1)},M=()=>{l(!w),S(!1)},_=()=>{p(!u),d(!1),c(!1)},H=()=>{c(!g),d(!1),p(!1)},q=()=>{d(!o),c(!1),p(!1)},z=()=>{n(null),h(null),f(null),$("")},R=()=>{let s=m;return C&&(s=s.filter(a=>a.caption.toLowerCase().includes(C.toLowerCase()))),j&&(s=s.filter(a=>a.kategori.toLowerCase().includes(j.toLowerCase()))),b&&(s=s.filter(a=>a.edisi.toLowerCase().includes(b.toLowerCase()))),x&&(s=s.filter(a=>a.tahun.toLowerCase().includes(x.toLowerCase()))),s},E=[...new Set(m.map(s=>s.kategori))],D=[...new Set(m.map(s=>s.edisi))],B=[...new Set(m.map(s=>s.tahun))];t.useEffect(()=>{(async a=>{try{const L=await Q.get(`/admin/user/${a}`);F(L.data),V(L.data.nama)}catch(L){console.log(L)}})(r.user.id)},[r.user.id]);const[y,A]=t.useState(null),Y=[...new Set(N.map(s=>s.tanggal_pengembalian))],G=()=>{let s=N;return y&&(s=s.filter(a=>a.tanggal_pengembalian.toLowerCase().includes(y.toLowerCase()))),s};return e.jsx("div",{children:k!=="admin"&&e.jsxs("div",{children:[e.jsx(J,{title:"Daftar Buku"}),e.jsx("div",{className:`transition-all duration-500 h-screen absolute z-50 bg-white ${v?"w-full md:w-[300px]":"w-0"}`,children:e.jsxs("div",{className:`transition-all duration-200 p-5 ${v?"block":"hidden"}`,children:[e.jsx("div",{className:"flex justify-end cursor-pointer",onClick:()=>U(),children:e.jsx("img",{src:"/close.png",alt:"",className:"w-3 h-3"})}),e.jsx(X,{id:r.user.id})]})}),e.jsx("div",{className:`overflow-auto transition-all duration-500 h-screen absolute z-50 bg-white ${w?"w-full md:w-[300px]":"w-0"}`,children:e.jsx("div",{className:`transition-all duration-200 ${w?"block":"hidden"}`,children:e.jsx("div",{className:"text-xs h-screen overflow-auto mx-5",children:e.jsxs("div",{className:"flex flex-col gap-3 pb-20",children:[e.jsx("img",{src:"/close.png",alt:"",className:"w-3 h-3 absolute z-50 right-2 top-2 cursor-pointer",onClick:M}),e.jsx("div",{className:"fixed bg-white w-[260px] pt-5 pb-2",children:e.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[e.jsx("h1",{children:"Daftar Pinjaman"}),e.jsx("div",{className:"text-[10px]",children:e.jsxs(i,{children:[e.jsx(i.Trigger,{children:e.jsx(K,{name:`${y!==null?y:"Tanggal"}`})}),e.jsx(i.Content,{children:e.jsx("div",{className:"",children:Y.map((s,a)=>e.jsx("div",{className:"hover:bg-blue-50 p-2",onClick:()=>A(s),children:e.jsx("p",{children:s})},a))})})]})})]})}),e.jsx("div",{className:"mt-10",children:G().map(s=>e.jsxs("div",{className:"hover:bg-blue-50 flex flex-row mt-2 gap-3 items-center cursor-pointer",children:[e.jsx("img",{src:s.buku.imageUrl==="null"|s.buku.imageUrl===null?"/default-book.jpg":O+s.buku.imageUrl,alt:"",className:"w-8 h-12 object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"line-clamp-2 font-bold",children:s.buku.caption}),e.jsxs("p",{className:"text-red-500 text-[8px] mt-2",children:[e.jsx("span",{className:"text-black mr-2",children:"Tanggal kembalikan:"}),s.tanggal_pengembalian]})]})]},s.id))})]})})})}),e.jsx(Z,{logo:"/logo.png",profile:O+r.user.foto_profil,handleSettting:U,handleBookmark:M,auth:r.user.nama,data:T}),e.jsx("div",{children:e.jsx("img",{src:"/footer.jpg",alt:"",className:"w-full h-screen"})}),e.jsxs("div",{className:"inset-0 absolute top-20 left-0 p-5 bg-opacity-10 bg-white/75 rounded-t-lg overflow-auto",children:[e.jsx("div",{className:"block md:hidden text-xs sticky top-0 z-40",children:e.jsxs("div",{className:"flex gap-5 mb-5",children:[e.jsx("p",{className:"p-1 bg-white/30 rounded-md w-32 text-center hover:bg-white cursor-pointer truncate",onClick:z,children:"Refresh all"}),e.jsxs(i,{children:[e.jsx(i.Trigger,{children:e.jsx("p",{className:"p-1 bg-white/30 rounded-md w-[65px] text-center hover:bg-white cursor-pointer truncate",children:j===null?"Kategori":j})}),e.jsx(i.Content,{children:e.jsx("div",{className:"w-full h-96 overflow-auto",children:E.map(s=>e.jsx("div",{className:"hover:bg-blue-50 p-2",onClick:()=>h(s),children:e.jsx("p",{className:"",children:s})},s.id))})})]}),e.jsxs(i,{children:[e.jsx(i.Trigger,{children:e.jsx("p",{className:"p-1 bg-white/30 rounded-md w-[65px] text-center hover:bg-white cursor-pointer truncate",children:b===null?"Edisi":b})}),e.jsx(i.Content,{children:e.jsx("div",{className:"w-full h-96 overflow-auto",children:D.map(s=>e.jsx("div",{className:"hover:bg-blue-50 p-2",onClick:()=>n(s),children:e.jsx("p",{className:"",children:s})},s.id))})})]}),e.jsxs(i,{children:[e.jsx(i.Trigger,{children:e.jsx("p",{className:"p-1 bg-white/30 rounded-md w-[65px] text-center hover:bg-white cursor-pointer truncate",children:x===null?"Tahun":x})}),e.jsx(i.Content,{children:e.jsx("div",{className:"w-full h-96 overflow-auto",children:B.map(s=>e.jsx("div",{className:"hover:bg-blue-50 p-2",onClick:()=>f(s),children:e.jsx("p",{className:"",children:s})},s.id))})})]})]})}),e.jsxs("div",{className:"grid",children:[e.jsxs("div",{className:"text-sm hidden md:block fixed bg-white w-[275px] z-20 h-screen rounded-lg p-5",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold pb-1",children:"Kategori"}),e.jsx("div",{className:"flex flex-col mt-3 cursor-pointer",children:E.slice(0,6).map(s=>e.jsx("div",{onClick:()=>h(s),children:e.jsx("p",{className:"hover:bg-blue-50 p-2",children:s})},s.id))}),u&&e.jsx("div",{className:"z-10 absolute top-0 w-[250px] h-screen bg-white rounded-lg left-[300px] p-5",onClick:()=>p(!1),children:e.jsx("div",{className:"flex flex-col cursor-pointer w-full h-screen overflow-auto",children:E.map(s=>e.jsx("div",{className:"hover:bg-blue-50 p-2",onClick:()=>h(s),children:e.jsx("p",{className:"",children:s})},s.id))})}),e.jsxs("p",{className:"group relative mt-2 p-2 text-blue-500 hover:bg-blue-50 flex justify-between items-center cursor-pointer",onClick:_,children:["Lebih banyak",e.jsx("img",{src:`${u?"/close.png":"/arrow.png"}`,alt:"",className:`group-hover:rotate-90 transition-all duration-500 w-3 h-3  ${u?"":"rotate-180"}`}),u&&e.jsx("p",{className:"bg-white w-10 h-10 absolute top-0 -right-20 rotate-45 z-0"})]})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("h1",{className:"font-bold pb-1",children:"Edisi"}),e.jsx("div",{className:"flex flex-col mt-3 cursor-pointer",children:D.slice(0,2).map(s=>e.jsx("div",{onClick:()=>n(s),children:e.jsx("p",{className:"hover:bg-blue-50 p-2",children:s})},s.id))}),g&&e.jsx("div",{className:"z-10 absolute top-0 w-[250px] h-screen bg-white rounded-lg left-[300px] p-5",onClick:()=>c(!1),children:e.jsx("div",{className:"flex flex-col cursor-pointer w-full h-screen overflow-auto",children:D.map(s=>e.jsx("div",{className:"hover:bg-blue-50 p-2",onClick:()=>n(s),children:e.jsx("p",{className:"",children:s})},s.id))})}),e.jsxs("p",{className:"group relative mt-2 p-2 text-blue-500 hover:bg-blue-50 flex justify-between items-center cursor-pointer",onClick:H,children:["Lebih banyak",e.jsx("img",{src:`${g?"/close.png":"/arrow.png"}`,alt:"",className:`group-hover:rotate-90 transition-all duration-500 w-3 h-3  ${g?"":"rotate-180"}`}),g&&e.jsx("p",{className:"bg-white w-10 h-10 absolute top-0 -right-20 rotate-45 z-0"})]})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("h1",{className:"font-bold pb-1",children:"Tahun Terbit"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-3 cursor-pointer",children:B.slice(0,5).map(s=>e.jsx("div",{onClick:()=>f(s),children:e.jsx("p",{className:"text-xs bg-blue-50 hover:bg-blue-100 p-1 px-3",children:s})},s.id))}),o&&e.jsx("div",{className:"z-10 absolute top-0 w-[250px] h-screen bg-white rounded-lg left-[300px] p-5",onClick:()=>d(!1),children:e.jsx("div",{className:"flex flex-col cursor-pointer w-full h-screen overflow-auto",children:B.map(s=>e.jsx("div",{className:"hover:bg-blue-50 p-2",onClick:()=>f(s),children:e.jsx("p",{className:"",children:s})},s.id))})}),e.jsxs("p",{className:"group relative mt-2 p-2 text-blue-500 hover:bg-blue-50 flex justify-between items-center cursor-pointer",onClick:q,children:["Lebih banyak",e.jsx("img",{src:`${o?"/close.png":"/arrow.png"}`,alt:"",className:`group-hover:rotate-90 transition-all duration-500 w-3 h-3  ${o?"":"rotate-180"}`}),o&&e.jsx("p",{className:"bg-white w-10 h-10 absolute top-0 -right-20 rotate-45 z-0"})]}),e.jsx("div",{className:"text-xs -ml-2 mt-2 hover:bg-blue-50 p-2",onClick:z,children:e.jsx(K,{name:"Refresh All"})})]})]}),e.jsx("div",{className:"md:ml-[300px] -mt-10",children:R().length===0?e.jsxs("div",{className:"mt-32",children:[e.jsx("p",{className:"text-center text-3xl font-bold",children:"Data tidak ditemukan"}),e.jsx("p",{className:"text-center mt-2",children:"Pastikan memasukan data dengan benar"}),e.jsx("div",{className:"mt-5 flex justify-center cursor-pointer",onClick:z,children:e.jsx("button",{className:"bg-black p-3 text-white rounded-lg",children:"Refresh Halaman Disini"})})]}):e.jsx("div",{children:e.jsx(W,{slides:R(),handleView:!0})})})]})]})]})})}export{xe as default};
