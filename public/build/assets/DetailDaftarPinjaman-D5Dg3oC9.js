import{r,j as a,a as g}from"./app-CycvKacP.js";import{P as b}from"./PopOver-C0JO4fVs.js";import{u as j}from"./Url-Bx3CnFKe.js";import{u as x}from"./index-I_Mwuxvc.js";import"./index-BI6bIyZt.js";function w({id:l,handleClose:u}){const[o,d]=r.useState(!1),m=e=>{s("status_peminjaman",e.target.value)},{data:n,setData:s,put:i,post:h}=x({nama_peminjam:"",kontak_peminjam:"",nama_buku:"",tanggal_pinjam:"",tanggal_pengembalian:"",status_peminjaman:"",keterangan:"",user_id:"",buku_id:"",foto_buku:""});r.useEffect(()=>{(async()=>{try{const t=await g.get(`/admin/daftarpinjaman/${l}`);s({nama_peminjam:t.data.nama_peminjam,kontak_peminjam:t.data.kontak_peminjam,nama_buku:t.data.nama_buku,tanggal_pinjam:t.data.tanggal_pinjam,tanggal_pengembalian:t.data.tanggal_pengembalian,status_peminjaman:t.data.status_peminjaman,keterangan:t.data.keterangan,user_id:t.data.user_id,buku_id:t.data.buku_id,foto_buku:t.data.buku.imageUrl})}catch(t){console.error(t)}})()},[l]);const p=e=>{e.preventDefault(),i(`/admin/daftarpinjaman-update/${l}`),d(!0)},c=()=>{i(`/admin/buku-stok-kembali/${n.buku_id}`),window.location.href="/admin/daftarpinjaman"};return a.jsxs("div",{className:"bg-white p-5 rounded-lg w-[650px]",children:[o&&a.jsx(b,{children:a.jsxs("div",{className:"bg-white p-5 rounded-md w-72 h-32",children:[a.jsx("p",{className:"text-center text-xs",children:"Data berhasil dirubah, konfirmasi stok buku"}),a.jsxs("div",{className:"flex justify-between gap-3 text-xs mt-5 cursor-pointer",children:[a.jsx("button",{className:"bg-black text-white rounded-md w-32 p-2",onClick:()=>window.location.reload(),children:"Stok buku tetap"}),a.jsx("button",{className:"bg-blue-500 text-white rounded-md w-32 p-2",onClick:c,children:"Update stok buku"})]})]})}),a.jsx("div",{className:"flex justify-end",onClick:u,children:a.jsx("img",{src:"/close.png",alt:"",className:"w-5 h-5 cursor-pointer"})}),a.jsx("form",{action:"",onSubmit:p,children:a.jsxs("div",{className:"flex gap-8",children:[a.jsx("div",{className:"w-full h-[450px]",children:a.jsx("img",{src:n.foto_buku==="null"|n.foto_buku===null?"/default-book.jpg":j+n.foto_buku,alt:"",className:"w-full h-full object-cover brightness-95 rounded-lg"})}),a.jsxs("div",{className:"w-full text-xs",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold",children:"Nama peminjam"}),a.jsx("input",{type:"text",name:"nama_peminjam",className:"w-full mt-2 text-xs bg-blue-50 hover:bg-blue-100 cursor-pointer rounded-sm outline-none border-0 capitalize",value:n.nama_peminjam,onChange:e=>s("nama_peminjam",e.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mt-3 font-bold",children:"Nama Buku"}),a.jsx("input",{type:"text",name:"nama_buku",className:"w-full mt-2 text-xs bg-blue-50 hover:bg-blue-100 cursor-pointer rounded-sm outline-none border-0",value:n.nama_buku,onChange:e=>s("nama_buku",e.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mt-3 font-bold",children:"Tanggal pinjam"}),a.jsx("input",{type:"text",name:"tanggal_pinjam",className:"w-full mt-2 text-xs bg-blue-50 hover:bg-blue-100 cursor-pointer rounded-sm outline-none border-0",value:n.tanggal_pinjam,onChange:e=>s("tanggal_pinjam",e.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mt-3 font-bold",children:"Tanggal pengembalian"}),a.jsx("input",{type:"text",name:"tanggal_pengembalian",className:"w-full mt-2 text-xs bg-blue-50 hover:bg-blue-100 cursor-pointer rounded-sm outline-none border-0",value:n.tanggal_pengembalian,onChange:e=>s("tanggal_pengembalian",e.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mt-3 font-bold",children:"Status peminjaman"}),a.jsxs("div",{className:"flex gap-3 mt-3",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"status_peminjaman",value:"meminjam",checked:n.status_peminjaman==="meminjam",onChange:m,className:"cursor-pointer"}),a.jsx("span",{className:"ml-2",children:"Meminjam"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"status_peminjaman",value:"dikembalikan",checked:n.status_peminjaman==="dikembalikan",onChange:m,className:"cursor-pointer"}),a.jsx("span",{className:"ml-2",children:"Dikembalikan"})]})]})]}),a.jsx("p",{className:"mt-3 font-bold",children:"Keterangan"}),a.jsx("textarea",{name:"keterangan",className:"text-xs w-full mt-3 bg-blue-50 hover:bg-blue-100 cursor-pointer rounded-sm outline-none border-0",value:n.keterangan===null?"":n.keterangan,onChange:e=>s("keterangan",e.target.value),required:!0}),a.jsx("button",{type:"submit",className:"bg-blue-500 text-white mt-3 rounded-md text-xs p-2 w-full",children:"Konfirmasi perubahan"})]})]})})]})}export{w as default};
